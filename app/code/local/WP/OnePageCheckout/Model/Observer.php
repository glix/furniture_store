<?php
/*
Copyright (C) 2011, WebAndPeople.com
*/
?>
<?php
 class WP_OnePageCheckout_Model_Observer{public function checkNewsletterSubscription($   ){if (Mage::getSingleton(chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116).chr(47).chr(115).chr(101).chr(115).chr(115).chr(105).chr(111).chr(110))->{"\x67\x65\x74\x49\x73\x53\x75\x62\x73\x63\x72\x69\x62\x65\x64"}()){$    =$   ->{"\x67\x65\x74\x45\x76\x65\x6e\x74"}()->{"\x67\x65\x74\x51\x75\x6f\x74\x65"}();$     =$    ->{"\x67\x65\x74\x43\x75\x73\x74\x6f\x6d\x65\x72"}();switch ($    ->{"\x67\x65\x74\x43\x68\x65\x63\x6b\x6f\x75\x74\x4d\x65\x74\x68\x6f\x64"}()){case Mage_Sales_Model_Quote::CHECKOUT_METHOD_REGISTER:case Mage_Sales_Model_Quote::CHECKOUT_METHOD_LOGIN_IN:$     ->{"\x73\x65\x74\x49\x73\x53\x75\x62\x73\x63\x72\x69\x62\x65\x64"}(1);break ;case Mage_Sales_Model_Quote::CHECKOUT_METHOD_GUEST:$      =Mage::getSingleton(chr(99).chr(111).chr(114).chr(101).chr(47).chr(115).chr(101).chr(115).chr(115).chr(105).chr(111).chr(110));try {$       =$    ->{"\x67\x65\x74\x42\x69\x6c\x6c\x69\x6e\x67\x41\x64\x64\x72\x65\x73\x73"}()->{"\x67\x65\x74\x45\x6d\x61\x69\x6c"}();$        =Mage::getModel(chr(110).chr(101).chr(119).chr(115).chr(108).chr(101).chr(116).chr(116).chr(101).chr(114).chr(47).chr(115).chr(117).chr(98).chr(115).chr(99).chr(114).chr(105).chr(98).chr(101).chr(114));$        ->{"\x6c\x6f\x61\x64\x42\x79\x45\x6d\x61\x69\x6c"}($       );if (!$        ->{"\x67\x65\x74\x43\x75\x73\x74\x6f\x6d\x65\x72\x49\x64"}()&& !$        ->{"\x69\x73\x53\x75\x62\x73\x63\x72\x69\x62\x65\x64"}()){$         =$        ->{"\x73\x75\x62\x73\x63\x72\x69\x62\x65"}($       );if ($         == Mage_Newsletter_Model_Subscriber::STATUS_NOT_ACTIVE){$      ->{"\x61\x64\x64\x53\x75\x63\x63\x65\x73\x73"}(Mage::helper(chr(111).chr(110).chr(101).chr(112).chr(97).chr(103).chr(101).chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116))->{"\x5f\x5f"}(chr(67).chr(111).chr(110).chr(102).chr(105).chr(114).chr(109).chr(97).chr(116).chr(105).chr(111).chr(110).chr(32).chr(114).chr(101).chr(113).chr(117).chr(101).chr(115).chr(116).chr(32).chr(104).chr(97).chr(115).chr(32).chr(98).chr(101).chr(101).chr(110).chr(32).chr(115).chr(101).chr(110).chr(116).chr(32).chr(114).chr(101).chr(103).chr(97).chr(114).chr(100).chr(105).chr(110).chr(103).chr(32).chr(121).chr(111).chr(117).chr(114).chr(32).chr(110).chr(101).chr(119).chr(115).chr(108).chr(101).chr(116).chr(116).chr(101).chr(114).chr(32).chr(115).chr(117).chr(98).chr(115).chr(99).chr(114).chr(105).chr(112).chr(116).chr(105).chr(111).chr(110)));}}}catch (Mage_Core_Exception$          ){$      ->{"\x61\x64\x64\x45\x78\x63\x65\x70\x74\x69\x6f\x6e"}($          ,Mage::helper(chr(111).chr(110).chr(101).chr(112).chr(97).chr(103).chr(101).chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116))->{"\x5f\x5f"}(chr(84).chr(104).chr(101).chr(114).chr(101).chr(32).chr(119).chr(97).chr(115).chr(32).chr(97).chr(32).chr(112).chr(114).chr(111).chr(98).chr(108).chr(101).chr(109).chr(32).chr(119).chr(105).chr(116).chr(104).chr(32).chr(116).chr(104).chr(101).chr(32).chr(110).chr(101).chr(119).chr(115).chr(108).chr(101).chr(116).chr(116).chr(101).chr(114).chr(32).chr(115).chr(117).chr(98).chr(115).chr(99).chr(114).chr(105).chr(112).chr(116).chr(105).chr(111).chr(110).chr(58).chr(32).chr(37).chr(115),$          ->{"\x67\x65\x74\x4d\x65\x73\x73\x61\x67\x65"}()));}catch (Exception $          ){$      ->{"\x61\x64\x64\x45\x78\x63\x65\x70\x74\x69\x6f\x6e"}($          ,Mage::helper(chr(111).chr(110).chr(101).chr(112).chr(97).chr(103).chr(101).chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116))->{"\x5f\x5f"}(chr(84).chr(104).chr(101).chr(114).chr(101).chr(32).chr(119).chr(97).chr(115).chr(32).chr(97).chr(32).chr(112).chr(114).chr(111).chr(98).chr(108).chr(101).chr(109).chr(32).chr(119).chr(105).chr(116).chr(104).chr(32).chr(116).chr(104).chr(101).chr(32).chr(110).chr(101).chr(119).chr(115).chr(108).chr(101).chr(116).chr(116).chr(101).chr(114).chr(32).chr(115).chr(117).chr(98).chr(115).chr(99).chr(114).chr(105).chr(112).chr(116).chr(105).chr(111).chr(110)));}break ;}Mage::getSingleton(chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116).chr(47).chr(115).chr(101).chr(115).chr(115).chr(105).chr(111).chr(110))->{"\x73\x65\x74\x49\x73\x53\x75\x62\x73\x63\x72\x69\x62\x65\x64"}(0);}}public function setCustomerOrderComments($   ){$           =nl2br(strip_tags(trim(Mage::getSingleton(chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116).chr(47).chr(115).chr(101).chr(115).chr(115).chr(105).chr(111).chr(110))->{"\x67\x65\x74\x57\x70\x43\x75\x73\x74\x6f\x6d\x65\x72\x43\x6f\x6d\x6d\x65\x6e\x74\x73"}())));if ($           ){$           =Mage::helper(chr(111).chr(110).chr(101).chr(112).chr(97).chr(103).chr(101).chr(99).chr(104).chr(101).chr(99).chr(107).chr(111).chr(117).chr(116))->{"\x5f\x5f"}(chr(67).chr(117).chr(115).chr(116).chr(111).chr(109).chr(101).chr(114).chr(32).chr(67).chr(111).chr(109).chr(109).chr(101).chr(110).chr(116).chr(115).chr(58)).chr(60).chr(98).chr(114).chr(32).chr(47).chr(62).chr(60).chr(98).chr(114).chr(32).chr(47).chr(62).$           ;$            =$   ->{"\x67\x65\x74\x45\x76\x65\x6e\x74"}()->{"\x67\x65\x74\x4f\x72\x64\x65\x72"}();$            ->{"\x73\x65\x74\x43\x75\x73\x74\x6f\x6d\x65\x72\x4e\x6f\x74\x65"}($           );$            ->{"\x73\x65\x74\x43\x75\x73\x74\x6f\x6d\x65\x72\x4e\x6f\x74\x65\x4e\x6f\x74\x69\x66\x79"}(true);}}}